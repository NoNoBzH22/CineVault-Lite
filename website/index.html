<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CineVault Lite</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>

    <div id="login-overlay" class="overlay active">
        <div class="login-box">
            <div class="logo-large">
                <i data-lucide="clapperboard" class="icon-xl"></i>
                <h1>CineVault Lite</h1>
            </div>
            <form id="login-form">
                <input type="password" id="api-password" placeholder="API Password" required autofocus>
                <button type="submit">Unlock</button>
            </form>
            <div id="login-error" class="error-msg hidden">Incorrect password</div>
        </div>
    </div>

    <div id="app-container" class="hidden">
        
        <nav class="sidebar">
            <div class="brand">
                <i data-lucide="clapperboard" class="brand-icon"></i>
                <span>CineVault</span>
            </div>
            <ul class="nav-links">
                <li class="active" data-target="section-trending">
                    <i data-lucide="flame"></i>
                    <span>Trending</span>
                </li>
                <li data-target="section-search">
                    <i data-lucide="search"></i>
                    <span>Search</span>
                </li>
                <li data-target="section-music">
                    <i data-lucide="music"></i>
                    <span>Music</span>
                </li>
                <li data-target="section-downloads">
                    <i data-lucide="download"></i>
                    <span>Downloads</span>
                </li>
                <li data-target="section-manual">
                    <i data-lucide="settings-2"></i>
                    <span>Manual</span>
                </li>
                <li id="btn-refresh-plex" class="nav-action">
                    <i data-lucide="refresh-cw"></i>
                    <span>Scan Plex</span>
                </li>
            </ul>
            <div class="nav-footer">
                <button id="btn-logout" class="btn-text">
                    <i data-lucide="log-out"></i>
                    <span>Logout</span>
                </button>
            </div>
        </nav>

        <main class="content-wrapper">
            
            <section id="section-trending" class="section active">
                <div class="hero-header">
                    <h2>ðŸ”¥ Trending Now</h2>
                    <p>Most popular movies right now</p>
                </div>
                <div id="trending-grid" class="media-grid">
                    <div class="loader"></div>
                </div>
            </section>

            <section id="section-search" class="section hidden">
                <div class="hero-header">
                    <h2>Global Search</h2>
                </div>
                
                <div class="search-hero">
                    <div class="search-input-wrapper">
                        <i data-lucide="search" class="search-icon-inside"></i>
                        <input type="text" id="search-input" placeholder="Movie or TV Series title...">
                        <button id="btn-search-trigger" class="btn-search-action">Go</button>
                    </div>
                    <div class="filter-pills">
                        <label class="pill">
                            <input type="radio" name="search-type" value="film" checked>
                            <span>Movies</span>
                        </label>
                        <label class="pill">
                            <input type="radio" name="search-type" value="serie">
                            <span>TV Series</span>
                        </label>
                    </div>
                </div>

                <div id="search-results" class="media-grid"></div>
            </section>

            <section id="section-music" class="section hidden">
                <div class="hero-header">
                    <h2>Music Hub</h2>
                </div>
                
                <div class="tabs">
                    <button class="tab-btn active" data-tab="music-download">Direct Download</button>
                    <button class="tab-btn" data-tab="music-playlist">Sync Plex</button>
                </div>

                <div class="music-container">
                    <div id="music-download" class="tab-content active">
                        <form id="music-dl-form" class="form-card">
                            <label>Spotify or YouTube Link</label>
                            <input type="text" id="music-url" placeholder="Paste link here..." required>
                            <button type="submit" class="btn-primary w-full">Start</button>
                        </form>
                    </div>

                    <div id="music-playlist" class="tab-content hidden">
                        <form id="playlist-sync-form" class="form-card">
                            <label>Spotify Playlist URL</label>
                            <input type="text" id="playlist-url" placeholder="Playlist URL...">
                            <label>Playlist Name</label>
                            <input type="text" id="playlist-name" placeholder="Name...">
                            <label>Plex User</label>
                            <select id="plex-users-select">
                                <option value="main">Admin</option>
                            </select>
                            <button type="submit" class="btn-primary w-full">Sync</button>
                        </form>
                    </div>

                    <div id="music-status-card" class="status-card hidden">
                        <div class="status-info">
                            <span id="music-current-song" class="song-title">Starting...</span>
                            <span id="music-percent" class="percent-text">0%</span>
                        </div>
                        <div class="progress-track">
                            <div id="music-progress-bar" class="progress-fill"></div>
                        </div>
                        <p id="music-message" class="status-sub">Initializing...</p>
                    </div>
                </div>
            </section>

            <section id="section-downloads" class="section hidden">
                <div class="header-row">
                    <h2>Downloads</h2>
                    <button id="btn-refresh-downloads" class="btn-icon-only">
                        <i data-lucide="refresh-cw"></i>
                    </button>
                </div>
                <div id="downloads-list" class="downloads-container">
                    <div class="empty-state">No active downloads</div>
                </div>
            </section>

            <section id="section-manual" class="section hidden">
                <div class="hero-header">
                    <h2>Manual Add</h2>
                </div>
                <div class="manual-container">
                    <form id="manual-form" class="form-card">
                        <label>1fichier Link</label>
                        <input type="text" id="manual-link" placeholder="https://1fichier.com/..." required>
                        <label>Name (Optional)</label>
                        <input type="text" id="manual-name" placeholder="Title...">
                        
                        <div class="filter-pills" style="justify-content:flex-start; margin-top:1rem;">
                            <label class="pill">
                                <input type="radio" name="manual-type" value="film" checked>
                                <span>Movie</span>
                            </label>
                            <label class="pill">
                                <input type="radio" name="manual-type" value="serie">
                                <span>Series</span>
                            </label>
                        </div>

                        <button type="submit" class="btn-success w-full" style="margin-top:1.5rem">Send</button>
                    </form>
                </div>
            </section>

        </main>
    </div>

    <div id="modal-overlay" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Title</h3>
                <button id="modal-close"><i data-lucide="x"></i></button>
            </div>
            <div id="modal-body" class="modal-body"></div>
        </div>
    </div>

    <div id="toast" class="toast hidden">Notification</div>

    <script src="app.js"></script>
</body>
</html>
